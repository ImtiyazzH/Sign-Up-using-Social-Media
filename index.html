<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome | Imtiyaz Hussain Project</title>
</head>

<body>
    Chala jaa!
    <h1 id="msgHead"></h1>
    <h1 id="greetHead"></h1>

    <button type="submit" id="signOutButton">Sign out</button>


    <script>
        let userCreds = JSON.parse(sessionStorage.getItem("user-creds"));
        let userInfo = JSON.parse(sessionStorage.getItem("user-info"));

        let msgHead = document.getElementById("msgHead")
        let greetHead = document.getElementById("greetHead")
        let signOutButton = document.getElementById("signOutButton")

        let Signout = () => {
            sessionStorage.removeItem("user-creds");
            sessionStorage.removeItem("user-info"); 
            window.location.href = 'login.html';
        }

        let CheckCred = () => {
            if (!sessionStorage.getItem("user-creds")) {
                window.location.href = "login.html";
            }
            else {
                msgHead.innerText = `User With Email "${userCreds.email}" logged in!`;
                greetHead.innerText = `Welcome ${userInfo.firstname + " " + userInfo.lastname}!`;
            }
        }

        window.addEventListener("load", CheckCred);
        signOutButton.addEventListener("click", Signout);

    </script>
    
    
</body>

</html>